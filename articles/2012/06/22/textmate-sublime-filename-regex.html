<!DOCTYPE html><html ng-app="kagd"><head><script src="https://use.typekit.net/ola6uac.js"></script><script>try{Typekit.load({ async: true });}catch(e){}</script><meta charset="utf-8" /><meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><title>Grant Klinsing  - TextMate & Sublime Filename Regex</title><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/articles/feed.xml" /><link href="/stylesheets/application-6f31c7ce.css" rel="stylesheet" /><link href="/stylesheets/syntax_highlighter/monokai-087b6249.css" rel="stylesheet" /><link href="/images/favicon.ico" rel="icon" type="image/ico" /><script>window.env = {
  API_HOST: '/'
}</script><script src="/javascripts/vendor-27cf58e5.js"></script></head><body class="articles articles_2012 articles_2012_06 articles_2012_06_22 articles_2012_06_22_textmate-sublime-filename-regex" menu-classes=""><div class="grid-frame"><div class="grid-block vertical"><div class="grid-block shrink"><header class="title-bar dark"><div class="title left"><a class="brand" href="/"><img alt="Grant Klinsing" src="/images/logo-a84e8d17.svg" /></a></div><div class="right"><nav><ul><li class="menu"><a menu-button=""><span>Menu</span><div class="bars"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div></a></li><li class="articles"><a href="/posts.html"><i class="fa fa-book"></i><span>/ Articles</span></a></li><li class="github"><a href="http://github.com/kagd" target="_blank"><i class="fa fa-github"></i><span>/ kagd</span></a></li><li class="twitter"><a href="http://twitter.com/gklinsing" target="_blank"><i class="fa fa-twitter"></i><span>/ @gklinsing</span></a></li><li class="stack-overflow"><a href="http://careers.stackoverflow.com/gklinsing" target="_blank"><i class="fa fa-stack-overflow"></i><span>/ gklinsing</span></a></li><li class="linked-in"><a href="https://www.linkedin.com/in/grantklinsing" target="_blank"><i class="fa fa-linkedin"></i><span>/ grantklinsing</span></a></li></ul></nav></div></header></div><section class="grid-block" id="main" role="main"><div class="grid-block align-center"><div class="grid-content large-8 article-content"><div class="article-header"><a class="tag" href="/articles/tags/textmate.html"><img src="/images/logo-a84e8d17.svg" /></a><h1>TextMate & Sublime Filename Regex</h1><div class="date"> <span>2012 /</span>  <span>June 22</span> </div></div><div class="article-body"><p>I love using snippets in <a href="http://macromates.com">TextMate</a>&trade; and <a href="http://www.sublimetext.com">Sublime Text 2</a>(ST2). They have sped up my work a lot especially when creating similar files over and over again and they have come in quite handy when creating blog posts also.</p>

<p>I use an open source blogging framework to create posts, <a href="https://github.com/tstone/MicrowaveJS">MicrowaveJS</a>. And, since this framework is targeted at developers, I must create a new markdown file each time i want to write a new post. One of the conventions of this framework is creating a YAML file config at the top of each post. Similar to this:</p>

<p></p>

<pre><code class="prettyprint lang-md">/*
title: Helpful TextMate &amp; Sublime Text 2 Filename Snippet
Date: June 22, 2012
Tags: [text editor, sublime text 2, textmate]
comments: true
*/
</code></pre>

<p>This YAML config defines the properties of this file. The title, date you want to publish, tags, and whether or not you should see comments. Now, I could write this out over and over again when creating posts, but why when there are snippets to speed things up. You will notice that there is a <em>title</em> attribute in this config. This <em>title</em> can be anything I want, but I want it to always be the same as the file name, with a couple of exceptions. It should be the file name with no hyphenation and file extension and capitalize the first character of each word.</p>

<p>At first I didn&rsquo;t think this was possible with snippets but I recently learned that there are variables available within the editor. In particular, <code class="prettyprint">$TM_FILENAME</code>. This gives you access to the file name from within a snippet. Since this is a bit more of an advanced post on snippets, I am going to assume you know the basics of TM and ST2 snippets. Here is my base snippet:</p>

<pre><code class="prettyprint lang-xml">&lt;![CDATA[/*
title: ${1:${TM_FILENAME}}
Date: ${2:April} ${3:4}, 201${4:2}
Tags: [${5:javascript, jquery}]
comments: ${6:true}
*/
]]&gt;
</code></pre>

<p>Step one, add the file name to the config, check. Step two, parse the file name into the correct format. We will do this with regular expression replacement. Now, I know what you are saying, &ldquo;the person who solves a problem with regex now has two problems&rdquo;. While that may be true, that is the method TM and ST2 use to transform variables.</p>

<p>My file names follow a convention, name-with-hyphens.md. So, the first thing that I need to do is remove all the hyphens</p>

<pre><code class="prettyprint lang-md">${1:${TM_FILENAME/-/ /g}}
// -&gt; helpful textmate &amp; sublime text 2 filename snippet.md
</code></pre>

<p>Here is how this works. <code class="prettyprint">TM_FILENAME</code> is the variable that the regex replacement will run on. Everything within the first two slashes is your matching regex. So, in this case, we are just matching on hyphens. Everything between the second and third slashes is the replacement. And in this case, it&rsquo;s just an empty space. The trailing <code class="prettyprint">g</code> is same as a normal regex, search globally.</p>

<p>Now, let&rsquo;s replace the extension</p>

<pre><code class="prettyprint lang-md">${1:${TM_FILENAME/-|.md/ /g}}
// -&gt; helpful textmate &amp; sublime text 2 filename snippet
</code></pre>

<p>Here&rsquo;s the fun part, take each word an capitalize it</p>

<pre><code class="prettyprint lang-md">${1:${TM_FILENAME/([\w&amp;]+)-?(.md)?/\u$1 /g}}
// -&gt; Helpful Textmate &amp; Sublime Text 2 Filename Snippet
</code></pre>

<p>You&rsquo;ll notice that we change up the regex quite a bit. That&rsquo;s because we need to grab the words rather than just remove some things. First, we grab all the &lsquo;word&rsquo; characters <code class="prettyprint">([\w]+)</code> and store them in a group for reference later. Next, we have to check for the use of hyphens or the extension to strip them out. For the replacement, <code class="prettyprint">\u</code> capitalizes what is directly after is. In this case, we are capitalizing the group that we saved earlier. Then add a space in between the words. TADA! We have a string that is titlized and in the correct format.</p>

<p>But wait! Why is there a trailing space? You can not tell in this post, but there is a trailing space at the end of the title. Remember how we added a space on the replacement of a match? This is a remnant of that space on the last replaced match. So, how do we get rid of it? Well, within the TM and ST2 regex system, there is the concept of conditionals. We can just check to see if it the last match.</p>

<pre><code class="prettyprint lang-md">${1:${TM_FILENAME/([\w&amp;]+)-?(.md)?/\u$1(?2:: )/g}}
// -&gt; Helpful Textmate &amp;-Sublime Text 2 Filename Snippet
</code></pre>

<p>Since we are already capturing a second group within out regex (<code class="prettyprint">(.md)</code>), we can test our conditional against that. Here is how the conditional looks: <code class="prettyprint">(?2:: )</code>. <code class="prettyprint">?2</code> is asking &#39;is there a second match?&rsquo;. This will only be true in the case of the last word since it is followed by the file extension. What&rsquo;s following the first colon is what to substitute is a second match exists. If however a second match is not met, whatever follows the second colon is substituted. That is all just a long winded way of saying, &#39;add a space if this is not the last word of the file&rsquo;.</p>

<p>So when it is all said and done, here is the whole snippet.</p>

<pre><code class="prettyprint lang-xml">&lt;![CDATA[/*
title: ${1:${TM_FILENAME/([\w&amp;]+)-?(.md)?/\u$1(?2:: )/g}}
Date: ${2:April} ${3:4}, 201${4:2}
Tags: [${5:javascript, jquery}]
comments: ${6:true}
*/
]]&gt;
</code></pre>
<div id="disqus_thread"></div><script>/* * * CONFIGURATION VARIABLES * * */
var disqus_shortname = 'kagdgithubio';
var disqus_identifier = 'textmate-sublime-filename-regex';
var disqus_title = 'TextMate & Sublime Filename Regex';
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div></div></section></div></div><div class="mobile-menu"><ul><li class="articles"><a href="/posts.html"><i class="fa fa-book"></i><span>/ Articles</span></a></li><li class="github"><a href="http://github.com/kagd" target="_blank"><i class="fa fa-github"></i><span>/ kagd</span></a></li><li class="twitter"><a href="http://twitter.com/gklinsing" target="_blank"><i class="fa fa-twitter"></i><span>/ @gklinsing</span></a></li><li class="stack-overflow"><a href="http://careers.stackoverflow.com/gklinsing" target="_blank"><i class="fa fa-stack-overflow"></i><span>/ gklinsing</span></a></li><li class="linked-in"><a href="https://www.linkedin.com/in/grantklinsing" target="_blank"><i class="fa fa-linkedin"></i><span>/ grantklinsing</span></a></li></ul></div><script src="/javascripts/application-a87a6ca3.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-67203020-1', 'auto');
ga('send', 'pageview');</script></body></html>