{"id":"/articles/2015/11/05/simulate-cursor-typing-with-angular","title":"Simulate Cursor Typing with Angular","date":"2015-11-05 00:20 MST","tags":"angular","content":"<p>Create the illusion of dynamic typing with a simple Angular directive.</p>\n<p>This can be accomplished with a simple directive</p>\n<pre><code class=\"hljs coffee\"><span class=\"hljs-function\"><span class=\"hljs-title\">Directive</span> = <span class=\"hljs-params\">($timeout)</span> -&gt;</span>\n  <span class=\"hljs-function\"><span class=\"hljs-title\">getRandomMs</span> = <span class=\"hljs-params\">(min, max)</span> -&gt;</span>\n    Math.floor(Math.random() * (max - min)) + min\n\n  <span class=\"hljs-function\"><span class=\"hljs-title\">link</span> = <span class=\"hljs-params\">(scope)</span> -&gt;</span>\n    scope.string = <span class=\"hljs-string\">''</span>\n\n    <span class=\"hljs-comment\"># Split the string into an array</span>\n    chars = scope.livetype.split(<span class=\"hljs-string\">''</span>)\n\n    <span class=\"hljs-comment\"># the loop to create the typing illusion</span>\n    chars.reduce <span class=\"hljs-function\"><span class=\"hljs-params\">(lastMs, currentChar, idx)</span> -&gt;</span>\n      newMs = lastMs + getRandomMs(<span class=\"hljs-number\">50</span>, <span class=\"hljs-number\">750</span>)\n\n      $timeout<span class=\"hljs-function\"> -&gt;</span>\n        scope.string += currentChar\n      , newMs\n\n      <span class=\"hljs-keyword\">return</span> newMs\n    , <span class=\"hljs-number\">0</span>\n\n  {\n    link: link\n    restrict: <span class=\"hljs-string\">'A'</span>\n    scope:\n      livetype: <span class=\"hljs-string\">'@livetype'</span>\n    template: <span class=\"hljs-string\">'{{ string }}&lt;span class=\"livetype-cursor\"&gt;|&lt;/span&gt;'</span>\n  }\n\nangular.<span class=\"hljs-built_in\">module</span>(<span class=\"hljs-string\">'liveType'</span>, []).directive <span class=\"hljs-string\">'livetype'</span>, Directive\nDirective.$inject = [<span class=\"hljs-string\">'$timeout'</span>]\n</code></pre>\n<p>The HTML</p>\n<pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h4</span> <span class=\"hljs-attr\">livetype</span>=<span class=\"hljs-string\">\"javascript\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h4</span>&gt;</span>\n</code></pre>\n<p>And don&#39;t forget out the CSS for the cursor blink</p>\n<pre><code class=\"hljs css\">@<span class=\"hljs-keyword\">keyframes</span> livetype-cursor-blink {\n  0%   { <span class=\"hljs-attribute\">opacity</span>: <span class=\"hljs-number\">0</span>; }\n  50%  { <span class=\"hljs-attribute\">opacity</span>: <span class=\"hljs-number\">1</span>; }\n  100% { <span class=\"hljs-attribute\">opacity</span>: <span class=\"hljs-number\">0</span>; }\n}\n<span class=\"hljs-selector-class\">.livetype-cursor</span> {\n  <span class=\"hljs-attribute\">animation</span>: livetype-cursor-blink <span class=\"hljs-number\">750ms</span> infinite;\n}\n</code></pre>\n<style type=\"text/css\">\n@keyframes livetype-cursor-loop {\n  0%   { opacity: 0; }\n  50%  { opacity: 1; }\n  100% { opacity: 0; }\n}\n.livetype-cursor {\n  animation: livetype-cursor-loop 750ms infinite;\n}\n</style>\n"}